[{"Body":{"ClassId":"workflow.TaskDefinition","DefaultVersion":true,"Description":"Gets the IP of a VMware Virtual Machine","Label":"Get VMware Virtual Machine Guest IP","Name":"GetVMwareVirtualMachineGuestIP","ObjectType":"workflow.TaskDefinition","Properties":{"ExternalMeta":true,"InputDefinition":[{"CustomDataTypeProperties":{"CatalogMoid":"shared","ObjectType":"workflow.CustomDataProperty"},"Default":{"ObjectType":"workflow.DefaultValue"},"Description":"The API call can be made to Intersight or an external endpoint added as Target. Target should be in claimed or connected state. Please refer Supported Endpoints section in the Web API request end user documentation for the list of Intersight Targets on which Web API task can be invoked. An empty value for this input indicates that the API call is made to Intersight.\n","DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"vCenter Target","Name":"Target","ObjectType":"workflow.TargetDataType","Properties":[{"DisplayAttributes":["Name","TargetType"],"ObjectType":"workflow.TargetProperty","Selector":"/api/v1/asset/Targets?$filter=((TargetType eq HTTPEndpoint and Status eq Claimed) or ((TargetType eq PureStorageFlashArray or TargetType eq HitachiVirtualStoragePlatform or TargetType eq NetAppActiveIqUnifiedManager or TargetType eq TerraformCloud or TargetType eq VmwareVcenter or TargetType eq APIC) and Status eq Connected))","SelectorProperty":{"Method":"GET","ObjectType":"workflow.SelectorProperty"},"SupportedObjects":["asset.Target"]}],"Required":true},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Virtual Machine Name","Name":"vmname","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"},"Required":true}],"ObjectType":"workflow.Properties","OutputDefinition":[{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Virtual Machine IP","Name":"vmip","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"VM Identity","Name":"identity","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"string"}},{"Default":{"ObjectType":"workflow.DefaultValue"},"DisplayMeta":{"InventorySelector":true,"ObjectType":"workflow.DisplayMeta","WidgetType":"None"},"Label":"Virtual Machine Detail","Name":"vmdetail","ObjectType":"workflow.PrimitiveDataType","Properties":{"Constraints":{"EnumList":[],"ObjectType":"workflow.Constraints"},"InventorySelector":[],"ObjectType":"workflow.PrimitiveDataProperty","Type":"json"}}],"RetryCount":60,"RetryDelay":10,"RetryPolicy":"Fixed","SupportStatus":"Supported","Timeout":600,"TimeoutPolicy":"Timeout"},"RollbackTasks":[],"SharedScope":"user","Tags":[{"Key":"category","Value":"Virtualization"}],"Version":1},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/TaskDefinitions","Verb":"POST"},{"Body":{"Batch":[{"ContentType":"json","Description":"Get VM Identity","EndpointRequestType":"Internal","Headers":{"Content-Type":"application/json"},"Label":"Get Identity","Method":"GET","Name":"GetIdentity","ObjectType":"workflow.WebApi","Outcomes":[{"Condition":"{{ne .global.GetIdentity.output.HttpStatusCode 200}}","Message":"{{.global.GetIdentity.output.HttpStatusMsg}}","Name":"HTTP Res is not 200","Type":"Status"}],"ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"Identity","ObjectType":"content.Parameter","Path":"$.value[?(@.name == \"{{index (FindAllString .global.task.input.vmname `([^\\/]+$)`) 0}}\")].vm","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"vmlist","ObjectType":"content.Parameter","Path":"$","Secure":false,"Type":"json"}],"Types":[]},"TargetType":"Endpoint","Url":"/rest/vcenter/vm"},{"ContentType":"json","Description":"Invokes the given Web API against the given endpoint. The endpoint can be Intersight API or an external endpoint added as Target in Intersight. Please refer Supported Endpoints section in the Web API request end user documentation for the list of Intersight Targets on which Web API task can be invoked.\n","EndpointRequestType":"Internal","Label":"Get IP","Method":"GET","Name":"InvokeGenericWebApi1","ObjectType":"workflow.WebApi","Outcomes":[],"ResponseSpec":{"ErrorParameters":[],"ObjectType":"content.Grammar","Parameters":[{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"vmdetail","ObjectType":"content.Parameter","Path":"$","Secure":false,"Type":"string"},{"AcceptSingleValue":false,"ComplexType":"","ItemType":"simple","Name":"vmip","ObjectType":"content.Parameter","Path":"$.value.ip_address","Secure":false,"Type":"string"}],"Types":[]},"TargetType":"Endpoint","Url":"/rest/vcenter/vm/{{ index .global.GetIdentity.output.Identity 0}}/guest/identity"}],"CancelAction":[],"ClassId":"workflow.BatchApiExecutor","Constraints":{"ObjectType":"workflow.TaskConstraints"},"Description":"Gets the IP of a VMware Virtual Machine","Name":"Get VMware Virtual Machine Guest IP","ObjectType":"workflow.BatchApiExecutor","Output":{"identity":"{{.global.GetIdentity.output.Identity}}","vmdetail":"{{.global.InvokeGenericWebApi1.output.vmdetail}}","vmip":"{{.global.InvokeGenericWebApi1.output.vmip}}","vmlist":"{{.global.GetIdentity.output.Identity}}"},"SharedScope":"user","TaskDefinition":{"ObjectType":"workflow.TaskDefinition","Selector":"Name eq \"GetVMwareVirtualMachineGuestIP\" and Version eq 1"}},"ClassId":"bulk.RestSubRequest","ObjectType":"bulk.RestSubRequest","TargetMoid":"","Uri":"/v1/workflow/BatchApiExecutors","Verb":"POST"}]